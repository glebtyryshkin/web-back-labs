import psycopg2
from random import randint

# Подключение к вашей базе данных
conn = psycopg2.connect(
    host='127.0.0.1',
    database='gleb_tyryshkin_knowledge_base',
    user='gleb_tyryshkin_knowledge_base',
    password='glebtyryshkin'
)
cur = conn.cursor()

# Список из 100 реальных книг (Название, Автор, Издательство)
books_data = [
    # --- IT и Разработка ---
    ('Чистый код', 'Роберт Мартин', 'Питер'),
    ('Совершенный код', 'Стив Макконнелл', 'БХВ-Петербург'),
    ('Грокаем алгоритмы', 'Адитья Бхаргава', 'Питер'),
    ('Паттерны проектирования', 'Эрик Фримен', 'Питер'),
    ('Искусство программирования', 'Дональд Кнут', 'Вильямс'),
    ('Рефакторинг', 'Мартин Фаулер', 'Вильямс'),
    ('Head First. Изучаем Java', 'Кэти Сьерра', 'Питер'),
    ('Python. К вершинам мастерства', 'Лучано Рамальо', 'ДМК Пресс'),
    ('Изучаем Python', 'Марк Лутц', 'Вильямс'),
    ('Высоконагруженные приложения', 'Мартин Клеппман', 'Питер'),
    ('Философия Java', 'Брюс Эккель', 'Питер'),
    ('Алгоритмы: построение и анализ', 'Томас Кормен', 'Вильямс'),
    ('Программист-прагматик', 'Эндрю Хант', 'Питер'),
    ('Введение в системы баз данных', 'К.Дж. Дейт', 'Вильямс'),
    ('Предметно-ориентированное проектирование (DDD)', 'Эрик Эванс', 'Вильямс'),
    ('Unix и Linux. Руководство', 'Эви Немет', 'Вильямс'),
    ('Код: тайный язык информатики', 'Чарльз Петцольд', 'Манн, Иванов и Фербер'),
    ('Мифический человеко-месяц', 'Фредерик Брукс', 'Символ-Плюс'),
    ('Дизайн-паттерны', 'Банда четырех (GoF)', 'Питер'),
    ('Экстремальное программирование', 'Кент Бек', 'Питер'),
    
    # --- Фантастика и Фэнтези ---
    ('Дюна', 'Фрэнк Герберт', 'АСТ'),
    ('451 градус по Фаренгейту', 'Рэй Брэдбери', 'Эксмо'),
    ('1984', 'Джордж Оруэлл', 'АСТ'),
    ('О дивный новый мир', 'Олдос Хаксли', 'АСТ'),
    ('Солярис', 'Станислав Лем', 'АСТ'),
    ('Автостопом по галактике', 'Дуглас Адамс', 'АСТ'),
    ('Я, робот', 'Айзек Азимов', 'Эксмо'),
    ('Основание (Академия)', 'Айзек Азимов', 'Эксмо'),
    ('Нейромант', 'Уильям Гибсон', 'Азбука'),
    ('Снежная лавина', 'Нил Стивенсон', 'Азбука'),
    ('Задача трех тел', 'Лю Цысинь', 'Fanzon'),
    ('Марсианин', 'Энди Вейер', 'АСТ'),
    ('Пикник на обочине', 'Братья Стругацкие', 'АСТ'),
    ('Трудно быть богом', 'Братья Стругацкие', 'АСТ'),
    ('Понедельник начинается в субботу', 'Братья Стругацкие', 'АСТ'),
    ('Метро 2033', 'Дмитрий Глуховский', 'АСТ'),
    ('Дозоры (Ночной дозор)', 'Сергей Лукьяненко', 'АСТ'),
    ('Властелин колец: Братство кольца', 'Дж.Р.Р. Толкин', 'АСТ'),
    ('Гарри Поттер и Философский камень', 'Дж.К. Роулинг', 'Махаон'),
    ('Ведьмак. Последнее желание', 'Анджей Сапковский', 'АСТ'),
    ('Игра престолов', 'Джордж Мартин', 'АСТ'),
    ('Бойцовский клуб', 'Чак Паланик', 'АСТ'),
    ('Заводной апельсин', 'Энтони Берджесс', 'АСТ'),
    ('Цветы для Элджернона', 'Дэниел Киз', 'Эксмо'),
    ('Мечтают ли андроиды об электроовцах?', 'Филип К. Дик', 'Эксмо'),
    ('Космическая одиссея 2001', 'Артур Кларк', 'Эксмо'),
    ('Стража! Стража!', 'Терри Пратчетт', 'Эксмо'),
    ('Хроники Амбера', 'Роджер Желязны', 'Эксмо'),
    ('Темная башня: Стрелок', 'Стивен Кинг', 'АСТ'),
    ('Зеленая миля', 'Стивен Кинг', 'АСТ'),
    ('Гарри Поттер и Тайная комната', 'Дж.К. Роулинг', 'Махаон'),
    ('Гарри Поттер и Узник Азкабана', 'Дж.К. Роулинг', 'Махаон'),
    ('Гарри Поттер и Кубок огня', 'Дж.К. Роулинг', 'Махаон'),
    ('Гарри Поттер и Орден Феникса', 'Дж.К. Роулинг', 'Махаон'),
    ('Гарри Поттер и Принц-полукровка', 'Дж.К. Роулинг', 'Махаон'),
    ('Гарри Поттер и Дары Смерти', 'Дж.К. Роулинг', 'Махаон'),
    ('Властелин колец: Две крепости', 'Дж.Р.Р. Толкин', 'АСТ'),
    ('Властелин колец: Возвращение короля', 'Дж.Р.Р. Толкин', 'АСТ'),
    ('Хоббит, или Туда и обратно', 'Дж.Р.Р. Толкин', 'АСТ'),
    ('Сияние', 'Стивен Кинг', 'АСТ'),

    # --- Классика ---
    ('Преступление и наказание', 'Федор Достоевский', 'Эксмо'),
    ('Идиот', 'Федор Достоевский', 'Эксмо'),
    ('Братья Карамазовы', 'Федор Достоевский', 'Эксмо'),
    ('Война и мир', 'Лев Толстой', 'Азбука'),
    ('Анна Каренина', 'Лев Толстой', 'Азбука'),
    ('Мастер и Маргарита', 'Михаил Булгаков', 'АСТ'),
    ('Собачье сердце', 'Михаил Булгаков', 'АСТ'),
    ('Мертвые души', 'Николай Гоголь', 'АСТ'),
    ('Евгений Онегин', 'Александр Пушкин', 'АСТ'),
    ('Герой нашего времени', 'Михаил Лермонтов', 'АСТ'),
    ('Отцы и дети', 'Иван Тургенев', 'АСТ'),
    ('Вишневый сад', 'Антон Чехов', 'АСТ'),
    ('Над пропастью во ржи', 'Джером Сэлинджер', 'Эксмо'),
    ('Убить пересмешника', 'Харпер Ли', 'АСТ'),
    ('Великий Гэтсби', 'Фрэнсис Скотт Фицджеральд', 'Азбука'),
    ('Сто лет одиночества', 'Габриэль Гарсиа Маркес', 'АСТ'),
    ('Три товарища', 'Эрих Мария Ремарк', 'АСТ'),
    ('На Западном фронте без перемен', 'Эрих Мария Ремарк', 'АСТ'),
    ('Портрет Дориана Грея', 'Оскар Уайльд', 'Азбука'),
    ('Повелитель мух', 'Уильям Голдинг', 'АСТ'),

    # --- Нон-фикшн и Саморазвитие ---
    ('Sapiens. Краткая история человечества', 'Юваль Ной Харари', 'Синдбад'),
    ('Homo Deus. Краткая история будущего', 'Юваль Ной Харари', 'Синдбад'),
    ('Думай медленно... решай быстро', 'Даниэль Канеман', 'АСТ'),
    ('Краткая история времени', 'Стивен Хокинг', 'АСТ'),
    ('Эгоистичный ген', 'Ричард Докинз', 'Corpus'),
    ('Черный лебедь', 'Нассим Талеб', 'КоЛибри'),
    ('Антихрупкость', 'Нассим Талеб', 'КоЛибри'),
    ('Богатый папа, бедный папа', 'Роберт Кийосаки', 'Попурри'),
    ('7 навыков высокоэффективных людей', 'Стивен Кови', 'Альпина Паблишер'),
    ('Пиши, сокращай', 'Максим Ильяхов', 'Альпина Паблишер'),
    ('Джедайские техники', 'Максим Дорофеев', 'Манн, Иванов и Фербер'),
    ('Не работайте с м*даками', 'Роберт Саттон', 'Манн, Иванов и Фербер'),
    ('Красная таблетка', 'Андрей Курпатов', 'Капитал'),
    ('Тонкое искусство пофигизма', 'Марк Мэнсон', 'Альпина Паблишер'),
    ('Магия утра', 'Хэл Элрод', 'Манн, Иванов и Фербер'),
    ('Атлант расправил плечи', 'Айн Рэнд', 'Альпина Паблишер'),
    ('Источник', 'Айн Рэнд', 'Альпина Паблишер'),
    ('Психология влияния', 'Роберт Чалдини', 'Питер'),
    ('Игры, в которые играют люди', 'Эрик Берн', 'Эксмо'),
    ('Эмоциональный интеллект', 'Дэниел Гоулман', 'Манн, Иванов и Фербер')
]

cur.execute("TRUNCATE TABLE books RESTART IDENTITY;")

# Вставка данных
for i, book in enumerate(books_data, 1):
    title, author, publisher = book
    pages = randint(200, 1000) # Генерируем случайное кол-во страниц
    
    cover_url = "/static/rgz/book_cover.jpg"
    
    cur.execute(
        "INSERT INTO books (title, author, pages, publisher, cover_url) VALUES (%s, %s, %s, %s, %s)",
        (title, author, pages, publisher, cover_url)
    )

conn.commit()
cur.close()
conn.close()

print(f"Успешно добавлено {len(books_data)} реальных книг!")
