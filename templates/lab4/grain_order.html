{% extends "base.html" %}

{% block lab %}Заказ зерна{% endblock %}

{% block main %}
    <h1>Заказ зерна</h1>
    
    {% if error %}
        <div style="color: red; font-weight: bold; margin: 20px 0;">
            {{ error }}
        </div>
    {% endif %}
    
    {% if order_details %}
        <div style="background-color: #e6ffe6; padding: 15px; margin: 20px 0; border-radius: 5px;">
            <h3>Заказ успешно сформирован</h3>
            <p>Вы заказали {{ order_details.grain_name }}.</p>
            <p>Вес: {{ order_details.weight }} т.</p>
            
            {% if order_details.has_discount %}
                <p style="color: green;">
                    Применена скидка 10% за большой объём. 
                    Размер скидки: {{ order_details.discount }} руб.
                </p>
            {% endif %}
            
            <p><strong>Сумма к оплате: {{ order_details.total }} руб</strong></p>
        </div>
    {% endif %}
    
    <form method="post">
        <div style="margin: 15px 0;">
            <label>Тип зерна:</label><br>
            {% for key, grain in grain_types.items() %}
                <input type="radio" id="{{ key }}" name="grain_type" value="{{ key }}">
                <label for="{{ key }}">{{ grain.name }} ({{ grain.price }} руб/т)</label><br>
            {% endfor %}
        </div>
        
        <div style="margin: 15px 0;">
            <label for="weight">Вес (тонн):</label>
            <input type="number" id="weight" name="weight" step="0.1" min="0.1">
        </div>
        
        <div>
            <button type="submit">Оформить заказ</button>
        </div>
    </form>
    
    <div style="margin-top: 20px;">
        <a href="/lab4">Назад к лабораторной работе 4</a>
    </div>
{% endblock %}